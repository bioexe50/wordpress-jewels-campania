!function($){$.Observe={}}(jQuery),function($,ns){var get=function(origin,target){target||(target=origin,origin=window.document);var result=[];return $(target).each((function(){for(var selector=[],prev=$(this),current=prev.parent();current.length&&!prev.is(origin);current=current.parent()){var tag=prev.get(0).tagName.toLowerCase();selector.push(tag+":eq("+current.children(tag).index(prev)+")"),prev=current}(current.length||prev.is(origin))&&result.push("> "+selector.reverse().join(" > "))})),result.join(", ")},capture=function(origin,target){target||(target=origin,origin=window.document);var result=[];return $(target).each((function(){var textIndex=-1,realTarget=this;if(this instanceof Text)for(var children=(realTarget=this.parentNode).childNodes,i=0;i<children.length;i++)if(children[i]===this){textIndex=i;break}var path=get(origin,realTarget),same=$(origin).is(realTarget);result.push((function(origin){var target=same?origin:$(origin).find(path);return-1===textIndex?target:target.contents()[textIndex]}))})),function(origin){return origin=origin||window.document,result.reduce((function(acc,fn){return acc.add(fn(origin))}),$([]))}};ns.path={get:get,capture:capture}}(jQuery,jQuery.Observe),function($,ns){var Branch=function(root){this.original=$(root),this.root=this.original.clone(!1,!0)};Branch.prototype.find=function(selector){var path;return ns.path.capture(this.original,selector)(this.root)},ns.Branch=Branch}(jQuery,jQuery.Observe),function($,ns){var toObject=function(array,fn){var result={};return array.forEach((function(name){var pair=fn(name);pair&&(result[pair[0]]=pair[1])})),result},OBSERVER_OPTIONS=toObject(["childList","attributes","characterData","subtree","attributeOldValue","characterDataOldValue","attributeFilter"],(function(name){return[name.toLowerCase(),name]})),ALL=toObject(Object.keys(OBSERVER_OPTIONS),(function(name){if("attributefilter"!==name)return[OBSERVER_OPTIONS[name],!0]})),EXTENDED_OPTIONS=toObject(["added","removed"],(function(name){return[name.toLowerCase(),name]})),EMPTY=$([]),parseOptions=function(options){if("object"==typeof options)return options;options=options.split(/\s+/);var result={};return options.forEach((function(opt){if(opt=opt.toLowerCase(),!OBSERVER_OPTIONS[opt]&&!EXTENDED_OPTIONS[opt])throw new Error("Unknown option "+opt);result[OBSERVER_OPTIONS[opt]||EXTENDED_OPTIONS[opt]]=!0})),result},objectToString=function(obj){return"["+Object.keys(obj).sort().reduce((function(acc,key){var valueStr=obj[key]&&"object"==typeof obj[key]?objectToString(obj[key]):obj[key];return acc+"["+JSON.stringify(key)+":"+valueStr+"]"}),"")+"]"},MutationObserver=window.MutationObserver||window.WebKitMutationObserver,Pattern=function(target,options,selector,handler){this._originalOptions=$.extend({},options),options=$.extend({},options),this.attributeFilter=options.attributeFilter,delete options.attributeFilter,selector&&(options.subtree=!0),options.childList&&(options.added=!0,options.removed=!0),(options.added||options.removed)&&(options.childList=!0),this.target=$(target),this.options=options,this.selector=selector,this.handler=handler};Pattern.prototype.is=function(options,selector,handler){return objectToString(this._originalOptions)===objectToString(options)&&this.selector===selector&&this.handler===handler},Pattern.prototype.match=function(record){var self=this,options=this.options,type=record.type;if(!this.options[type])return EMPTY;if(this.selector)switch(type){case"attributes":if(!this._matchAttributeFilter(record))break;case"characterData":return this._matchAttributesAndCharacterData(record);case"childList":if(record.addedNodes&&record.addedNodes.length&&options.added){var result=this._matchAddedNodes(record);if(result.length)return result}if(record.removedNodes&&record.removedNodes.length&&options.removed)return this._matchRemovedNodes(record)}else{var recordTarget=record.target instanceof Text?$(record.target).parent():$(record.target);if(!options.subtree&&recordTarget.get(0)!==this.target.get(0))return EMPTY;switch(type){case"attributes":if(!this._matchAttributeFilter(record))break;case"characterData":return this.target;case"childList":if(record.addedNodes&&record.addedNodes.length&&options.added||record.removedNodes&&record.removedNodes.length&&options.removed)return this.target}}return EMPTY},Pattern.prototype._matchAttributesAndCharacterData=function(record){return this._matchSelector(this.target,[record.target])},Pattern.prototype._matchAddedNodes=function(record){return this._matchSelector(this.target,record.addedNodes)},Pattern.prototype._matchRemovedNodes=function(record){var branch=new ns.Branch(this.target),nodes=Array.prototype.slice.call(record.removedNodes).map((function(node){return node.cloneNode(!0)}));return record.previousSibling?branch.find(record.previousSibling).after(nodes):record.nextSibling?branch.find(record.nextSibling).before(nodes):branch.find(record.target).empty().append(nodes),this._matchSelector(branch.root,nodes).length?$(record.target):EMPTY},Pattern.prototype._matchSelector=function(origin,element){var match=origin.find(this.selector);return element=Array.prototype.slice.call(element),match=match.filter((function(){var self=this;return element.some((function(node){return node instanceof Text?node.parentNode===self:node===self||$(node).has(self).length}))}))},Pattern.prototype._matchAttributeFilter=function(record){return!this.attributeFilter||!this.attributeFilter.length||this.attributeFilter.indexOf(record.attributeName)>=0};var Observer=function(target){this.patterns=[],this._target=target,this._observer=null};Observer.prototype.observe=function(options,selector,handler){var self=this;this._observer?this._observer.disconnect():this._observer=new MutationObserver((function(records){records.forEach((function(record){self.patterns.forEach((function(pattern){var match=pattern.match(record);match.length&&match.each((function(){pattern.handler.call(this,record)}))}))}))})),this.patterns.push(new Pattern(this._target,options,selector,handler)),this._observer.observe(this._target,this._collapseOptions())},Observer.prototype.disconnect=function(options,selector,handler){var self=this;this._observer&&(this.patterns.filter((function(pattern){return pattern.is(options,selector,handler)})).forEach((function(pattern){var index=self.patterns.indexOf(pattern);self.patterns.splice(index,1)})),this.patterns.length||this._observer.disconnect())},Observer.prototype.disconnectAll=function(){this._observer&&(this.patterns=[],this._observer.disconnect())},Observer.prototype.pause=function(){this._observer&&this._observer.disconnect()},Observer.prototype.resume=function(){this._observer&&this._observer.observe(this._target,this._collapseOptions())},Observer.prototype._collapseOptions=function(){var result={};return this.patterns.forEach((function(pattern){var restrictiveFilter=result.attributes&&result.attributeFilter;if(!restrictiveFilter&&result.attributes||!pattern.attributeFilter)restrictiveFilter&&pattern.options.attributes&&!pattern.attributeFilter&&delete result.attributeFilter;else{var attributeFilter=(result.attributeFilter||[]).concat(pattern.attributeFilter),existing={},unique=[];attributeFilter.forEach((function(attr){existing[attr]||(unique.push(attr),existing[attr]=1)})),result.attributeFilter=unique}$.extend(result,pattern.options)})),Object.keys(EXTENDED_OPTIONS).forEach((function(name){delete result[EXTENDED_OPTIONS[name]]})),result};var DOMEventObserver=function(target){this.patterns=[],this._paused=!1,this._target=target,this._events={},this._handler=this._handler.bind(this)};DOMEventObserver.prototype.NS=".jQueryObserve",DOMEventObserver.prototype.observe=function(options,selector,handler){var pattern=new Pattern(this._target,options,selector,handler),target=$(this._target);pattern.options.childList&&(this._addEvent("DOMNodeInserted"),this._addEvent("DOMNodeRemoved")),pattern.options.attributes&&this._addEvent("DOMAttrModified"),pattern.options.characterData&&this._addEvent("DOMCharacerDataModified"),this.patterns.push(pattern)},DOMEventObserver.prototype.disconnect=function(options,selector,handler){var target=$(this._target),self=this;this.patterns.filter((function(pattern){return pattern.is(options,selector,handler)})).forEach((function(pattern){var index=self.patterns.indexOf(pattern);self.patterns.splice(index,1)}));var eventsInUse=this.patterns.reduce((function(acc,pattern){return pattern.options.childList&&(acc.DOMNodeInserted=!0,acc.DOMNodeRemoved=!0),pattern.options.attributes&&(acc.DOMAttrModified=!0),pattern.options.characterData&&(acc.DOMCharacerDataModified=!0),acc}),{});Object.keys(this._events).forEach((function(type){eventsInUse[type]||(delete self._events[type],target.off(type+self.NS,self._handler))}))},DOMEventObserver.prototype.disconnectAll=function(){var target=$(this._target);for(var name in this._events)target.off(name+this.NS,this._handler);this._events={},this.patterns=[]},DOMEventObserver.prototype.pause=function(){this._paused=!0},DOMEventObserver.prototype.resume=function(){this._paused=!1},DOMEventObserver.prototype._handler=function(e){if(!this._paused){var record={type:null,target:null,addedNodes:null,removedNodes:null,previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};switch(e.type){case"DOMAttrModified":record.type="attributes",record.target=e.target,record.attributeName=e.attrName,record.oldValue=e.prevValue;break;case"DOMCharacerDataModified":record.type="characterData",record.target=$(e.target).parent().get(0),record.attributeName=e.attrName,record.oldValue=e.prevValue;break;case"DOMNodeInserted":record.type="childList",record.target=e.relatedNode,record.addedNodes=[e.target],record.removedNodes=[];break;case"DOMNodeRemoved":record.type="childList",record.target=e.relatedNode,record.addedNodes=[],record.removedNodes=[e.target]}for(var i=0;i<this.patterns.length;i++){var pattern=this.patterns[i],match=pattern.match(record);match.length&&match.each((function(){pattern.handler.call(this,record)}))}}},DOMEventObserver.prototype._addEvent=function(type){this._events[type]||($(this._target).on(type+this.NS,this._handler),this._events[type]=!0)},ns.Pattern=Pattern,ns.MutationObserver=Observer,ns.DOMEventObserver=DOMEventObserver,$.fn.observe=function(options,selector,handler){return selector?handler||(handler=selector,selector=null):(handler=options,options=ALL),this.each((function(){var self=$(this),observer=self.data("observer");observer||(observer=MutationObserver?new Observer(this):new DOMEventObserver(this),self.data("observer",observer)),options=parseOptions(options),observer.observe(options,selector,handler)}))},$.fn.disconnect=function(options,selector,handler){return options&&(selector?handler||(handler=selector,selector=null):(handler=options,options=ALL)),this.each((function(){var self=$(this),observer=self.data("observer");if(observer){if(!options)return observer.disconnectAll(),void self.removeData("observer");options=parseOptions(options),observer.disconnect(options,selector,handler)}}))}}(jQuery,jQuery.Observe);